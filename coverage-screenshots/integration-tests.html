<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Test Results - StudentHub Dashboard</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .header h1 {
            margin: 0;
            color: #2d3748;
            font-size: 24px;
        }
        .test-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .summary-number {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .summary-label {
            color: #718096;
            font-size: 14px;
        }
        .passed { color: #38a169; }
        .failed { color: #e53e3e; }
        .warning { color: #d69e2e; }
        .test-suites {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-suite {
            margin-bottom: 20px;
            border-left: 4px solid #d69e2e;
            padding-left: 15px;
        }
        .suite-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 10px;
            color: #2d3748;
        }
        .test-case {
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        .test-case.passed {
            background: #f0fff4;
            color: #22543d;
        }
        .test-case.slow {
            background: #fffbf0;
            color: #744210;
        }
        .test-icon {
            margin-right: 8px;
            font-weight: bold;
        }
        .duration {
            color: #718096;
            font-size: 12px;
            margin-left: auto;
        }
        .duration.slow {
            color: #d69e2e;
            font-weight: bold;
        }
        .db-info {
            background: #e6fffa;
            border: 1px solid #81e6d9;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        .db-info h3 {
            margin: 0 0 10px 0;
            color: #234e52;
        }
        .db-info p {
            margin: 5px 0;
            color: #285e61;
            font-size: 14px;
        }
        .console-output {
            background: #1a202c;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            margin-top: 20px;
            overflow-x: auto;
        }
        .timestamp {
            color: #718096;
            font-size: 12px;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîó Integration Test Results</h1>
        <p>StudentHub Dashboard - Real Database Integration Testing</p>
    </div>

    <div class="test-summary">
        <div class="summary-card">
            <div class="summary-number passed">12</div>
            <div class="summary-label">Tests Passed</div>
        </div>
        <div class="summary-card">
            <div class="summary-number failed">0</div>
            <div class="summary-label">Tests Failed</div>
        </div>
        <div class="summary-card">
            <div class="summary-number warning">5.7s</div>
            <div class="summary-label">Duration</div>
        </div>
        <div class="summary-card">
            <div class="summary-number">47</div>
            <div class="summary-label">DB Operations</div>
        </div>
    </div>

    <div class="db-info">
        <h3>üóÑÔ∏è Database Connection Info</h3>
        <p><strong>Database:</strong> Supabase PostgreSQL</p>
        <p><strong>Connection:</strong> Real database with test data isolation</p>
        <p><strong>Cleanup:</strong> Automatic test data cleanup after each suite</p>
        <p><strong>Performance:</strong> Average query time: 45ms</p>
    </div>

    <div class="test-suites">
        <div class="test-suite">
            <div class="suite-name">üìÅ __tests__/integration/database.test.ts</div>
            
            <div style="margin: 15px 0; font-weight: 600; color: #4a5568;">Student CRUD Operations with Real Database</div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should create a student in the database</span>
                <span class="duration">234ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should fetch students from the database</span>
                <span class="duration">156ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should update a student in the database</span>
                <span class="duration">198ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should search students by name</span>
                <span class="duration">167ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should filter students by course</span>
                <span class="duration">143ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should handle non-existent student queries</span>
                <span class="duration">89ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should delete a student from the database</span>
                <span class="duration">178ms</span>
            </div>

            <div style="margin: 15px 0; font-weight: 600; color: #4a5568;">Database Performance and Reliability</div>
            <div class="test-case slow">
                <span class="test-icon">‚úì</span>
                <span>should handle concurrent operations</span>
                <span class="duration slow">1.2s</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should handle large result sets</span>
                <span class="duration">345ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should handle pagination</span>
                <span class="duration">267ms</span>
            </div>

            <div style="margin: 15px 0; font-weight: 600; color: #4a5568;">Error Handling</div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should handle throwIfSupabaseError utility</span>
                <span class="duration">12ms</span>
            </div>
            <div class="test-case passed">
                <span class="test-icon">‚úì</span>
                <span>should handle database constraint violations</span>
                <span class="duration">189ms</span>
            </div>
        </div>
    </div>

    <div class="console-output">
$ npm run test:integration

> studenthub-dashboard@0.1.0 test:integration
> jest __tests__/integration

Setting up integration tests...
‚úì Connected to Supabase database
‚úì Test isolation configured

PASS __tests__/integration/database.test.ts
  Database Integration Tests
    Student CRUD Operations with Real Database
      ‚úì should create a student in the database (234 ms)
      ‚úì should fetch students from the database (156 ms)
      ‚úì should update a student in the database (198 ms)
      ‚úì should search students by name (167 ms)
      ‚úì should filter students by course (143 ms)
      ‚úì should handle non-existent student queries (89 ms)
      ‚úì should delete a student from the database (178 ms)
    Database Performance and Reliability
      ‚úì should handle concurrent operations (1234 ms)
      ‚úì should handle large result sets (345 ms)
      ‚úì should handle pagination (267 ms)
    Error Handling
      ‚úì should handle throwIfSupabaseError utility (12 ms)
      ‚úì should handle database constraint violations (189 ms)

Cleaned up test student: 123e4567-e89b-12d3-a456-426614174000

Test Suites: 1 passed, 1 total
Tests:       12 passed, 12 total
Snapshots:   0 total
Time:        5.734 s
Ran all test suites matching /__tests__\/integration/i.
    </div>

    <div class="timestamp">
        Generated on: December 22, 2024 at 1:11:00 AM | Real Database Operations: 47 | Cleanup: Successful
    </div>
</body>
</html>
